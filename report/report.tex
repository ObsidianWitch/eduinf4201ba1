\documentclass[a4paper, frenchb, 11pt]{article}

\usepackage[top=2cm, bottom=2cm, left=2cm, right=2cm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{babel}

\usepackage{multicol}
\setlength{\columnseprule}{1pt} % separation line between columns

\usepackage{hyperref}
\hypersetup{
	colorlinks=true,	% false: boxed links; true: colored links
	linkcolor=black,	% color of internal links
	urlcolor=blue,		% color of external links
	citecolor=blue
}

\usepackage{graphicx}	% import graphics
\usepackage{wrapfig}	% wrap text around figures
\usepackage{subcaption}

% Colors
\usepackage[usenames,dvipsnames]{xcolor}

% Colored frame
\usepackage{mdframed}
\usepackage{framed}
\definecolor{shadecolor}{rgb}{0.96,0.96,0.96}
\definecolor{TFFrameColor}{rgb}{0.96,0.96,0.96}
\definecolor{TFTitleColor}{rgb}{0.00,0.00,0.00}

% Redefine leftbar envvironment
\newlength{\leftbarwidth}
\setlength{\leftbarwidth}{1pt}
\newlength{\leftbarsep}
\setlength{\leftbarsep}{10pt}

\newcommand*{\leftbarcolorcmd}{\color{leftbarcolor}} % as a command to be more flexible
\colorlet{leftbarcolor}{gray}

\renewenvironment{leftbar}{%
    \def\FrameCommand{{\leftbarcolorcmd{\vrule width \leftbarwidth\relax\hspace {\leftbarsep}}}}%
    \MakeFramed {\advance \hsize -\width \FrameRestore }%
}{%
    \endMakeFramed
}

% Code listings
\usepackage{listings}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{steelblue}{rgb}{0.16,0.37,0.58}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{blue}{rgb}{0,0,0.7}
\definecolor{lightred}{rgb}{1,0.96,0.96}
\definecolor{darkred}{rgb}{0.85,0.33,0.31}
\definecolor{lightblue}{HTML}{EBF5FA}
\definecolor{darkblue}{HTML}{D2DCE1}
\lstset{
	language=C,
	basicstyle=\scriptsize,
	numbers=left,                   % where to put the line-numbers
  	numberstyle=\tiny\color{gray},
	commentstyle=\color{steelblue},
	stringstyle=\color{BrickRed},
	backgroundcolor=\color{shadecolor},
    keywordstyle=\color{OliveGreen},
	frame=single,                   % adds a frame around the code
 	rulecolor=\color{black},
	emph={},
	emphstyle=\color{mauve},
	morekeywords=[2]{obside@obsideb},
	keywordstyle={\color{black}},
	keywordstyle=[2]{\color{dkgreen}},
	showstringspaces=false,
  	tabsize=4,
	moredelim=[is][\small\ttfamily]{/*}{*/},
	breaklines=true
}

% Title page
\title{
	\textbf{INF-4201B - TP Sockets}\\
}
\date{\today}

\begin{document}
\maketitle
\newpage

%\tableofcontents
%\newpage

\section*{Introduction}
% TODO

\begin{mdframed}[backgroundcolor=lightblue, linecolor=darkblue]
	Une archive contenant le code source du TP peut être téléchargée à l'adresse
	suivante : % TODO lien vers archive contenant tous les fichiers du TP
\end{mdframed}
\newpage

\section*{Exercice 1}
% TODO
%* struct *hostent should not be freed
%    * "the return value may point at static data' (gethostbyname manpage)
%    * "an application sould never attempt to modify this structure or to free any of its components (MSDN)

% * server side : bind() associate a socket with a port

% * INADDR_ANY : <https://www.cs.cmu.edu/~srini/15-441/F01.full/www/assignments/P2/htmlsim_split/node18.html>,<http://man7.org/linux/man-pages/man7/ip.7.html> : 
%         When INADDR_ANY is specified in the bind call, the socket will be bound to all local interfaces.
%    * byte order : http://stackoverflow.com/questions/6081892/does-sin-addr-s-addr-inaddr-any-need-htonl-at-all
%             INADDR_ANY is the "any address" in IPV4. That address is 0.0.0.0 in dotted notation, so 0x000000 in hex on any endianness. Passing it through htonl has no effect.

\newpage

\section*{Exercice 2}
% TODO

\subsection*{Utilisation de getaddrinfo}
% TODO L'ensemble des exercices du TP ont été réalisés en utilisant gethostbyname, il semble cependant
% que l'usage de getaddrinfo soit aujourd'hui recommandé (source beej's guide, page ??) -> citer les
% avantages de getaddrinfo par rapport à l'ancienne fonction (entre autres : fonctionne avec IPv4 et IPv6).

\newpage

\section*{Exercice 3}
% TODO
\newpage

\section*{Exercice 4}
% TODO

% TODO parler de pourquoi fd_set master & fd_set readfs (voir beej's guide page 42 + extract from man page :
% "On exit, the sets are modified in place to indicate which file descriptors actually changed status.")
\newpage

\section*{Exercice 5}
% TODO
\newpage

\renewcommand\refname{Ressources utilisées}
\begin{thebibliography}{5} % TODO
% * <http://www.jmarshall.com/easy/http/>
% * <https://github.com/Zintinio/HappyHTTP/blob/master/happyhttp.cpp>
% * <http://stackoverflow.com/questions/11208299/http-get-request-using-c-without-libcurl>
% * <http://www.binarytides.com/receive-full-data-with-recv-socket-function-in-c/>
% * Beej's guide
% * <http://www.binarytides.com/receive-full-data-with-recv-socket-function-in-c/>
% * <http://stackoverflow.com/questions/20922571/server-program-that-listens-on-two-different-socket-interfaces>
\end{thebibliography}

\end{document}
